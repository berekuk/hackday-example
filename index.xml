#!/usr/bin/perl
# vim: ft=perl
# Copyright (c) 2009 Yandex.ru

use strict;
use warnings;

use CGI;
use CGI::Carp qw(fatalsToBrowser);
use LWP::Simple;
use XML::Simple;
use Template;

my $cgi = CGI->new();
$cgi->charset('utf-8');
print $cgi->header(-content => 'text/html');

my %xml;

$xml{hackday} = XMLin(get('http://blogs.yandex.ru/search.rss?text=hackday'));
$xml{hackday_popular} = XMLin(get('http://blogs.yandex.ru/search.rss?text=hackday&how=relev'));

my $template = Template->new(INCLUDE_PATH => '/var/www/hackday/tt');
$template->process('index.html', { rss => \%xml }) or die $template->error;

